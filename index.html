<!DOCTYPE html>
<html lang="zh-Hant">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>長安静美</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css" />
  <link rel="stylesheet" href="/custom/css/index.css" />


</head>

<body>
  <div id="Navbar">
    <img class="bg-img" src="/images/00/cover.jpg" alt="">
    <!-- Navbar-------------------------------------------------------- -->
    <nav class="navbar navbar-expand-md bg-01396d navbar-dark fixed-top shadow">
      <div class="container">
        <a id="" class="navbar-brand" href="#">長安静美</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false" href="">
                相簿
              </a>
              <ul class="dropdown-menu">
                <li><a class="nav-link text-dark mx-2" data-url="/pages/albums.html" href="#photo01"
                    onclick="updatePageContent(this); return false;">照片1</a></li>
                <li><a class="nav-link text-dark mx-2" data-url="/pages/albums.html" href="#photo02"
                    onclick="updatePageContent(this); return false;">照片2</a></li>
              </ul>
            </li>
            <li class="nav-item"><a class="nav-link" data-url="/pages/page_1.html" href="#table01"onclick="updatePageContent(this); return false;">教學經歷</a></li>
            <li class="nav-item"><a class="nav-link" data-url="/pages/page_1.html" href="#table02"onclick="updatePageContent(this); return false;">任教課程</a></li>
            <li class="nav-item"><a class="nav-link" data-url="/pages/page_1.html" href="#table03"onclick="updatePageContent(this); return false;">獲獎記錄</a></li>
            <li class="nav-item"><a class="nav-link" data-url="/pages/page_1.html" href="#table04"onclick="updatePageContent(this); return false;">研習紀錄</a></li>
            <li class="nav-item"><a class="nav-link" data-url="/pages/page_1.html" href="#table05"onclick="updatePageContent(this); return false;">校內補助計畫</a></li>
            <li class="nav-item"><a class="nav-link" data-url="/pages/page_1.html" href="#table51"onclick="updatePageContent(this); return false;">產學合作</a></li>
            <li class="nav-item"><a class="nav-link" data-url="/pages/page_1.html" href="#table06"onclick="updatePageContent(this); return false;">校內外講座演講</a></li>
            <li class="nav-item"><a class="nav-link" data-url="/pages/page_1.html" href="#table07"onclick="updatePageContent(this); return false;">評審</a></li>
            <li class="nav-item"><a class="nav-link" data-url="/pages/page_1.html" href="#table08"onclick="updatePageContent(this); return false;">著作</a></li>
            <li class="nav-item"><a class="nav-link" data-url="/pages/page_1.html" href="#table99"onclick="updatePageContent(this); return false;">連絡資訊</a></li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="my-2 p-2"></div>
    <div class="my-5 p-5"></div>
  </div>
  <!-- updateArea-------------------------------------------------------- -->
  <div id="updateArea">

  </div>
  <!-- 聯絡方式-------------------------------------------------------- -->
  <div class=" bg-01396d pt-3" id="footer">
    <table class="table table-borderless footer" id="table99">
      <tbody>
        <tr>
          <td style="background-color: #01396d;" class="text-light text-end"><a
              href="https://maps.app.goo.gl/gUAscx3zjeWEiGRF9" class="link-light" title="youtube link"><i
                class="fa-regular fa-map"></i></a></td>
          <td style="background-color: #01396d;" class="text-light"><a href="https://maps.app.goo.gl/kt48QvRWuVSrztw99"
              class="link-light">〒824005 高雄市燕巢區大學路1號</a></td>
        </tr>
        <tr>
          <td style="background-color: #01396d;" class="text-light text-end"><i class="fa-solid fa-phone"></i></td>
          <td style="background-color: #01396d;" class="text-light">07 - 6011000&nbsp;&nbsp;#35010</td>
        </tr>
        <tr>
          <td style="background-color: #01396d;" class="text-light text-end"><a href="mailto:shizumi@nkust.edu.tw"
              class="link-light" title="youtube link"><i class="fa-regular fa-envelope"></i></a></td>
          <td style="background-color: #01396d;" class="text-light"><a href="mailto:shizumi@nkust.edu.tw"
              class="link-light"> shizumi@nkust.edu.tw</a></td>
        </tr>
      </tbody>
    </table>
    <div class="bg-01396d text-center text-secondary">
      &copy; 2024 Nagayasu Shizumi All Rights Reserved.
    </div>
  </div>


  <script src="/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="/js/jquery-3.7.1.min.js"></script>

  <script>
    const updateAreaID = 'updateArea'; // 更新區塊的 ID
    let currentPage = "/pages/page_1.html";

    // 首頁載入完成後，載入內容
    document.addEventListener('DOMContentLoaded', function () {
      loadPageContent(currentPage, "");
    });

    // 載入頁面內容
    function loadPageContent(url, elementId) {
      console.log("1.loadPageContent載入頁面ing：" + url);
      fetch(url)
        .then(response => response.text())
        .then(html => {
          const element = document.getElementById(updateAreaID);
          if (element) {
            element.innerHTML = html; // 更新內容
            currentPage = url; // 更新當前頁面
            console.log("2.loadPageContent載入頁面成功：" + url);
            console.log("3.目前使用頁面" + currentPage);
            scrollToElement(elementId);  // 確保HTML渲染完畢後再滾動
          }
        })
        .catch(error => {
          console.error('Error loading the page: ', error);
        });
    }

    //Navbar的List點擊事件
    function updatePageContent(linkElement) {
      $(document).ready(function () {
        var url = linkElement.getAttribute('data-url');
        var anchorId = linkElement.getAttribute('href').substring(1); // 移除 '#'，获取实际的元素 ID
        loadPageContent(url, anchorId);
      });
    }

    //滑動到指定元素
    function scrollToElement(elementId) {
      console.log("4.scrollToElement方法檢查引數", elementId);
      const attemptScroll = (id, attemptsLeft = 5) => {
        const element = document.getElementById(elementId);
        if (element) {
          element.scrollIntoView({ behavior: "smooth", block: "start", inline: "nearest" });
          console.log("6a.已滾動到元素:", elementId);

        } else if (attemptsLeft > 0) {
          setTimeout(() => attemptScroll(id, attemptsLeft - 1), 100); // 每100ms重試一次，最多重試5次
          console.log("6b.正在重試滾動到元素:", elementId);
        } else {
          console.error("6c.非同步執行scrollToElement來不及取得元素:", elementId);
        }
      };

      console.log("5.scrollToElement 滑動到這個元素：", elementId);
      attemptScroll(elementId);
    }

    //清除元素內容-----------------------------------------
    function clearContent() {
      const elements = document.getElementById(updateAreaID);
      if (elements) {
        elements.innerHTML = '';
      } else {
        console.error('請檢查此元素是否存在: ', updateAreaID);
      }
    }


    // Navbar的List點擊事件-----------------------------------------
    $(document).ready(function () {
      $('.nav-link').click(function () {
        $('.nav-link').removeClass('active');
        $(this).addClass('active');
      });
    });

    // 當DOM載入完成後，設定事件監聽器-----------------------------------------
    document.addEventListener('DOMContentLoaded', function () {
      // 當點擊任何導航連結時
      document.querySelectorAll('.navbar-nav .nav-link').forEach(function (link) {
        link.addEventListener('click', function (event) {
          // 檢查點擊的元素是否為下拉選單切換
          if (!this.classList.contains('dropdown-toggle')) {
            // 只有當不是下拉選單時，才關閉折疊的導航
            var navbarCollapse = document.querySelector('.navbar-collapse');
            if (navbarCollapse.classList.contains('show')) {
              navbarCollapse.classList.remove('show');
            }
          }
        });
      });

      // 確保當點擊品牌名時，也應該收起導航條-----------------------------------------
      var brandLink = document.querySelector('.navbar-brand');
      brandLink.addEventListener('click', function () {
        var navbarCollapse = document.querySelector('.navbar-collapse');
        if (navbarCollapse.classList.contains('show')) {
          navbarCollapse.classList.remove('show'); //收起下拉清單
        }
      });
    });
  </script>
</body>

</html>